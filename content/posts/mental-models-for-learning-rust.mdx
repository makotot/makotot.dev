---
title: Mental models for learning Rust を読んだメモ
draft: false
date: '2024-03-17'
tags: ['rust']
---

[Mental models for learning Rust](https://kerkour.com/rust-mental-models) を読んで、メモ。

- Rustを学ぶ上でのメンタルモデルについて。
  - 簡単ではない。
  - 詰まることなくコードを読めるようになるまでフルタイムでも1年はかかったけど、その価値はあった。
    - 学ぶ人のバックグラウンド次第ではあると思う。1年は短い方？
  - 他言語を学ぶときのメンタルモデルは適用できない。
- コンパイラーを受け入れる必要がある。
  - TypeScriptのような静的型付け言語を使っている人にとっては、強い違和感なく受け入れられるかもしれない。
  - コンパイラーは友好的なコードレビュアーと考えると良い。コンパイルを阻害するものではなく、早期にコードの欠陥を教えてくれるもの。
  - コンパイルエラーのメッセージは改善されていっている。今わかりにくいものがあっても将来的には改善されていく。
- 数週間でマスターできる言語ではない。
  - それ自体は特に問題ではない。全てを把握できていなくても使い始めることはできる。
    - Rustは膨大な言語だということ。
  - 最初、背後にあるコンピューターサイエンスの全てを理解しようとしたけど、それは間違ったアプローチだった
    - Rustの全機能は網羅するには多すぎるし、使わない可能性が高い。
      - むしろ使わないほうが良い。
        - `non_ascii_idents`を使うことはない。苦痛でしかない。
        - [2457-non-ascii-idents - The Rust RFC Book](https://rust-lang.github.io/rfcs/2457-non-ascii-idents.html)
    - 未知のものがあることを受け入れた上で、書いて、失敗して、学んで、繰り返すのが良い。
- 賢くやろうとしすぎないこと。
  - [KISSの原則 - Wikipedia](https://ja.wikipedia.org/wiki/KISS%E3%81%AE%E5%8E%9F%E5%89%87)
    - まず動くものを作る。それから改善していく。
  - 型システムの複雑さに挑戦しすぎると、コンパイラーが理解しずらいエラーを出すようになる。
- コストを前払い。
  - 他言語より初速が遅い感覚にはなるはず。
    - コンパイラーが他言語よりも厳しくコードをチェックしていて、求められるコードのレベルが高くなる。
    - その分、後で難解なバグのデバッグなどをする必要が少なくなるはず。
  - TypeScriptやGoのような言語のコンパイラーや型チェックは緩いので、実行時のエラー検出にツールや外部サービスが必要。
    - Rustではそれが不要。ロギングのみで十分。
      - 記事を書いたSylvain氏の経験上、Rustの実行環境でのクラッシュは1度もない。
    - Rustでは、コンパイル時点で全てのエラーに対する対処をしている。
    - Discordのシニアスタッフエンジニアも同様のコメントを過去にしている。
- 関数型。
  - （Sylvain氏の見解として）Rustは関数型と命令型の完璧なミックス。
    - [関数型プログラミング - Wikipedia](https://ja.wikipedia.org/wiki/%E9%96%A2%E6%95%B0%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0)
    - [命令型プログラミング - Wikipedia](https://ja.wikipedia.org/wiki/%E5%91%BD%E4%BB%A4%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0)
  - 純粋な命令型言語から来た人であれば、関数型の概念を学ぶ必要があるということ。
    - ほとんどのプログラミング言語は命令型？
      - [関数型言語と命令型言語（宣言的、手続き的）｜関数型言語とは何か？(Haskellで学ぶ)](https://zenn.dev/masahiro_toba/books/a808e953a39110/viewer/0383a4)
  - `for`ループよりもイテレーターを用いる。ミュータブルよりイミュータブル。
- メンテナンスの助けになるツールを利用するのが良い。
  - `rustfmt`, `clippy`, `cargo update`, `cargo outdated`など。
  - [付録D：便利な開発ツール - The Rust Programming Language 日本語版](https://doc.rust-jp.rs/book-ja/appendix-04-useful-development-tools.html)
